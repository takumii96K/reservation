<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta id="csrfToken" name="_csrf" th:content="${_csrf.token}"/>
    <meta id="csrfHeaderName" name="_csrf_header" th:content="${_csrf.headerName}"/>
    <title>å•†å“é¸æŠç”»é¢</title>
    <link rel="stylesheet" type="text/css" href="/style.css">
    <link rel="stylesheet" type="text/css" href="/product.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/slick-carousel/slick/slick.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/slick-carousel/slick/slick-theme.css"/>
    <link rel="stylesheet" href="https://cdn.skypack.dev/sanitize.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/slick-carousel/slick/slick.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
	
	<!--å›ºå®šãƒ˜ãƒƒãƒ€ãƒ¼ãƒ•ãƒ©ã‚°ãƒ¡ãƒ³ãƒˆã®æŒ¿å…¥ -->
    <div th:replace="fragments/layout :: header"></div>

	<!-- è¦‹å‡ºã— -->
    <h1 class="midashi">Menu</h1>
    
    <!-- ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ -->
	<main class="wrap">
	<div class="main">	
	<div class="main_content">
		
	<!-- ã‚¹ãƒ©ã‚¤ãƒ‰ã‚·ãƒ§ãƒ¼ -->
	<ul class="slider">
	  <li><img src="https://images.pexels.com/photos/2619970/pexels-photo-2619970.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1" alt=""></li>
	  <li><img src="https://images.pexels.com/photos/2271107/pexels-photo-2271107.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1" alt=""></li>
	  <li><img src="https://images.pexels.com/photos/3944308/pexels-photo-3944308.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1" alt=""></li>
	  <li><img src="https://images.pexels.com/photos/1639557/pexels-photo-1639557.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1" alt=""></li>
	  <li><img src="https://images.pexels.com/photos/1893555/pexels-photo-1893555.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1" alt=""></li>
	  <li><img src="https://images.pexels.com/photos/1437812/pexels-photo-1437812.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1" alt=""></li>
	<!-- ã‚¹ãƒ©ã‚¤ãƒ‰ã‚·ãƒ§ãƒ¼é–¢é€£ã®ãƒªãƒ³ã‚¯ --></ul>
	<script src="https://code.jquery.com/jquery-3.4.1.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.min.js"></script>
	<script src="https://coco-factory.jp/ugokuweb/wp-content/themes/ugokuweb/data/6-1-7/js/6-1-7.js"></script>

        <!-- ã‚«ãƒ†ã‚´ãƒªé¸æŠç”¨ã®ãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³ãƒ¡ãƒ‹ãƒ¥ãƒ¼ -->
        <form th:action="@{/takeout/product}" method="get">
            <select name="category" onchange="this.form.submit()">
                <option value="">å…¨ã¦ã®ã‚«ãƒ†ã‚´ãƒª</option>
                <option value="FOOD">é£Ÿå“</option>
                <option value="DRINK">é£²æ–™</option>
                <option value="SIDE">ã‚µã‚¤ãƒ‰</option>
                <!-- ä»–ã®ã‚«ãƒ†ã‚´ãƒªã‚ªãƒ—ã‚·ãƒ§ãƒ³ -->
            </select>
        </form>


        <!-- å•†å“ã‚«ãƒ¼ãƒ‰ã‚’å‹•çš„ã«è¡¨ç¤º -->
            <div class="menu-container">
                <!-- å•†å“ã‚«ãƒ¼ãƒˆ HTML -->
                <div class="product-card" th:each="product : ${products}">
                    <div class="product-image">
                        <img th:src="${product.imgUrl}" th:alt="${product.productName}" />
                    </div>
                    <div class="product-details"
                         th:data-product-id="${product.id}"
                         th:data-product-name="${product.productName}"
                         th:data-product-price="${product.price}"
                         th:data-quantity="1"> <!-- åˆæœŸå€¤ã‚’ã“ã“ã§è¨­å®šã€ã‚‚ã—å¤‰æ›´ãŒã‚ã‚Œã°JavaScriptã§æ›´æ–° -->
                        <span class="productName-span" th:text="${product.productName}">Product Name</span> -
                        <span class="productPrice-span" th:text="${#numbers.formatDecimal(product.price, 0, 'COMMA', 0, 'POINT')} + 'å††'">Price</span>
                        <label>
                            <input type="number" name="quantity" min="1" value="1" class="quantity-input" />
                        </label>
                        <input type="hidden" name="productId" th:value="${product.id}" />
                        <button type="button" class="add-to-cart-button" onclick="addToCart(this)">ã‚«ãƒ¼ãƒˆã«è¿½åŠ </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="message-container">
        <p id="message"></p>
    </div>

    <!--ã‚µã‚¤ã‚³ãƒ­ -->
    <form th:action="@{/random}" method="post">
        <button id="getRandomProductButton" class="random-product-button"style="background-color: transparent; border: none; color: transparent; cursor: pointer; font-size: 100px;">ğŸ¤ </button>
    </form>
    <div th:if="${randomProductName}">
        <p th:text="${randomProductName} + 'ãŒï½µï½½ï½½ï¾’â™ª'" style="color:transparent;"></p>
    </div>



    <!--ã‚«ãƒ¼ãƒˆã¸ç§»å‹•ãƒœã‚¿ãƒ³-->
    <button class="button-36">
        <a th:href="@{/inCart/list}">ã‚«ãƒ¼ãƒˆã‚’ç¢ºèª</a>
    </button>

        <!--ãƒˆãƒƒãƒ—ã¸æˆ»ã‚‹ãƒœã‚¿ãƒ³ãƒ•ãƒ©ã‚°ãƒ¡ãƒ³ãƒˆã®æŒ¿å…¥ -->
        <div th:replace="fragments/layout :: toTop"></div>
</main>

<!--å›ºå®šãƒ•ãƒƒã‚¿ãƒ¼ãƒ•ãƒ©ã‚°ãƒ¡ãƒ³ãƒˆã®æŒ¿å…¥ -->
<div th:replace="fragments/layout :: footer"></div>


    <script>
        function filterProductsByCategory() {
            let selectedCategory = document.getElementById('categorySelect').value;
            fetch(`/api/products?category=${selectedCategory}`)
                .then(response => response.json())
                .then(products => {
                    // ã“ã“ã§è£½å“ã‚’è¡¨ç¤ºã™ã‚‹å‡¦ç†ã‚’å®Ÿè£…
                    displayProducts(products);
                });
        }

        function displayProducts(products) {
            let productsContainer = document.getElementById('productsContainer');
            productsContainer.innerHTML = ''; // æ—¢å­˜ã®è£½å“ã‚’ã‚¯ãƒªã‚¢
            products.forEach(product => {
                // å„è£½å“ã®è¡¨ç¤ºå‡¦ç†ã‚’å®Ÿè£…
                let productElement = document.createElement('div');
                productElement.innerHTML = `<h3>${product.productName}</h3><p>ä¾¡æ ¼: ${product.price}å††</p>`;
                productsContainer.appendChild(productElement);
            });
        }

    </script>
<script th:src="@{/js/slider.js}"></script> <!-- å¤–éƒ¨ã®JavaScriptãƒ•ã‚¡ã‚¤ãƒ« -->
<script th:src="@{/js/addToCart.js}"></script>
</body>
</html>